{% load static qr_code crispy_forms_tags tz %}
<!-- Modal -->

<div id="printThis">
  <div class="modal fade" id="print-id" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">{% if user.is_location %}Trace Bantay Digital Establishment ID {% else %} Trace Bantay Digital Resident ID {% endif %}</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
              </div>
              <div class="modal-body">
                <div class="qr-container">
                    {% qr_from_text user.uuid size=20 border=6 %}
                </div>
                <div class="container-fluid">
                  <div class="row">
                      <div class="col-md p-2">
                        <label>{% if not user.is_location %}First Name: {% else %} Establishment Name: {% endif %}</label>
                            <b>{{ user.first_name }}</b>
                      </div>
                      <div class="col-md p-2">
                        <label>{% if not user.is_location %} Last Name: {% else %} Owner Name: {% endif %}</label>
                          <b>{{ user.last_name }}</b>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md p-2">
                        <label>Contact Number:</label>
                            <b>{{ user.phone }}</b>
                      </div>
                      <div class="col-md p-2">
                        <label>Email Address:</label>
                          <b>{{ user.email }}</b>
                      </div>
                  </div>
                  <div class="row">
                      <div class="col-md p-2">
                        <label>Home Address:</label>
                          <b>{{ user.address}}</b>
                      </div>
                  </div>
                </div>
              </div>
              <div class="modal-footer">
                  <button type="button" id="btn-print-close" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" id="btn-print" class="btn btn-success">Print</button>
              </div>
          </div>
      </div>
  </div>
</div>


<script type="text/javascript">
  document.getElementById("btn-print").onclick = function () {
    printElement(document.getElementById("printThis"));
}

function printElement(elem) {
    var domClone = elem.cloneNode(true);

    var $printSection = document.getElementById("printSection");

    if (!$printSection) {
        var $printSection = document.createElement("div");
        $printSection.id = "printSection";
        document.body.appendChild($printSection);
    }

    $printSection.innerHTML = "";
    $printSection.appendChild(domClone);
    window.print();
}
</script>
